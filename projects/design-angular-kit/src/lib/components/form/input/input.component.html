<div class="form-group">
  <div class="input-group">
    <div class="input-group-prepend" [class.d-none]="!prependText.hasChildNodes() && !prepend.hasChildNodes()">
      <div #prepend>
        <ng-content select="[prepend]"></ng-content>
      </div>
      <div class="input-group-text" #prependText>
        <ng-content select="[prependText]"></ng-content>
      </div>
    </div>

    <label *ngIf="label" [for]="id" [class.active]="isActiveLabel"
           [class.empty-prepend-label]="!prependText.hasChildNodes() && !prepend.hasChildNodes()">
      {{label}}
    </label>

    <span *ngIf="type === 'number'"
          class="input-number"
          [class.input-number-currency]="currency"
          [class.input-number-percentage]="percentage"
          [class.input-number-adaptive]="adaptive">

      <input type="number"
             [id]="id"
             [step]="step ?? null"
             [class.is-invalid]="isInvalid"
             [class.is-valid]="isValid"
             [formControl]="control"
             [placeholder]="placeholder"
             [readonly]="isReadonly"
             [attr.aria-describedby]="id + '-description'"
             (blur)="markAsTouched()" />

      <button type="button" class="input-number-add" (click)="incrementNumber()">
        <span class="visually-hidden">{{'it.form.increase-value'}}</span>
      </button>
      <button type="button" class="input-number-sub" (click)="incrementNumber(true)">
        <span class="visually-hidden">{{'it.form.decrease-value'}}</span>
      </button>
    </span>

    <input *ngIf="type !== 'number'"
           [id]="id"
           [type]="type"
           [class.form-control]="readonly !== 'plaintext'"
           [class.form-control-plaintext]="readonly === 'plaintext'"
           [class.is-invalid]="isInvalid"
           [class.is-valid]="isValid"
           [formControl]="control"
           [placeholder]="placeholder"
           [readonly]="isReadonly"
           [attr.aria-describedby]="id + '-description'"
           (blur)="markAsTouched()">

    <div class="input-group-append">
      <ng-content select="[append]"></ng-content>

      <div class="input-group-text">
        <ng-content select="[appendText]"></ng-content>
      </div>
    </div>
  </div>

  <small *ngIf="description" [id]="id + '-description'" class="form-text">{{description}}</small>
  <div *ngIf="isInvalid" class="form-feedback just-validate-error-label" [id]="id + '-error'">
    <div #customError>
      <ng-content select="[error]"></ng-content>
    </div>
    <ng-container *ngIf="!customError.hasChildNodes()">{{invalidMessage | async}}</ng-container>
  </div>
</div>
